<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- RSS Feed -->
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Morning Dev" />
  <title>
    
      How to make a Dragon Ball memory game - PART 2 &middot; Morning Dev
    
  </title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bree+Serif">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/assets/favicon/favlogo.ico">
</head>


<body>
    <div class="page-wrapper">
        <nav class="nav">
            <div class="nav-container">
                <a href="/">
                <img class="logo" src="/assets/logo.svg" alt="blog logo">
            </a>
                <ul>
                    <li class="list-item-about"><a class="about-link" href="/about">About</a></li>
                </ul>
            </div>
        </nav>

        <main>
            <div class="post">
  <div class="post-info">
    
      <br>
      <span>&nbsp;</span><time datetime="2018-04-16 00:00:00 +0200">April 16, 2018</time>
    
  </div>
  
  <h1 class="post-title">How to make a Dragon Ball memory game - PART 2</h1>
  
  <div class="post-line"></div>

  <p><img src="/assets/posts/memory/mockup.webp" alt="game mockup" /></p>

<p>Hi guys. This is the second part of this series. <a href="https://codeburst.io/how-to-make-a-dragon-ball-memory-game-part-1-91f40ba268dd">Here you can read part 1</a></p>

<h2 id="recap">Recap</h2>
<p>During the first part, we started to build the HTML structure of the game page. We began with the header, continued with the score panel and finished with one card built. We focused on the flip logic - made with a combination of JavaScript and CSS.</p>

<p>Here’s the CodePen from last time</p>

<p data-height="265" data-theme-id="dark" data-slug-hash="XExvbb" data-default-tab="html,result" data-user="davide2894" data-embed-version="2" data-pen-title="Memory Game - p1" data-preview="true" class="codepen">See the Pen <a href="https://codepen.io/davide2894/pen/XExvbb/">Memory Game - p1</a> by Davide (<a href="https://codepen.io/davide2894">@davide2894</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async="" src="https://static.codepen.io/assets/embed/ei.js"></script>

<p>Let’s take it from here.</p>

<hr />

<p>There is only one working card at the moment. We need 15 more.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"cards"</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flip-container card"</span> <span class="na">ontouchstart=</span><span class="s">"handleTouch(card)"</span> <span class="na">id=</span><span class="s">"1"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flipper"</span><span class="nt">&gt;</span>
        
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__front"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"span--hide "</span><span class="nt">&gt;</span>1<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__back"</span>
            <span class="err">&lt;/</span><span class="na">div</span><span class="nt">&gt;</span>
            
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flip-container card"</span> <span class="na">ontouchstart=</span><span class="s">"handleTouch(card)"</span> <span class="na">id=</span><span class="s">"2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flipper"</span><span class="nt">&gt;</span>
        
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__front"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"span--hide "</span><span class="nt">&gt;</span>1<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__back"</span>
            <span class="err">&lt;/</span><span class="na">div</span><span class="nt">&gt;</span>
            
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span> 
    
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flip-container card"</span> <span class="na">ontouchstart=</span><span class="s">"handleTouch(card)"</span> <span class="na">id=</span><span class="s">"3"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flipper"</span><span class="nt">&gt;</span>
        
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__front"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"span--hide "</span><span class="nt">&gt;</span>2<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__back"</span>
            <span class="err">&lt;/</span><span class="na">div</span><span class="nt">&gt;</span>
            
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flip-container card"</span> <span class="na">ontouchstart=</span><span class="s">"handleTouch(card)"</span> <span class="na">id=</span><span class="s">"4"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flipper"</span><span class="nt">&gt;</span>
        
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__front"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"span--hide "</span><span class="nt">&gt;</span>2<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card__back"</span>
            <span class="err">&lt;/</span><span class="na">div</span><span class="nt">&gt;</span>
            
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
        

<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<p>And so on, until you have a total of 16 cards.</p>

<p>Pay attention here: every single card has a unique <code class="highlighter-rouge">id</code> number.</p>

<p>We can recognize the 8 pairs because we numbered them from 1 to 8: you can see these numbers on both sides of the card. <em>So 16 <code class="highlighter-rouge">id</code>s and 8 numbered pairs</em>.</p>

<p>The numbered pairs have a <code class="highlighter-rouge">span--hide</code> class. These will become handy when we will be testing the game features, or when you want to add a feature of your own. Look at the styling. Because you can hide and show them as you like so you can control.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/*
.span--hide {
    display: none;
}*/</span>
</code></pre></div></div>

<p>For now, let’s keep it commented: we’ll need it later.</p>

<h2 id="dimension-fix">Dimension fix</h2>
<p>At their actual state, cards are way too big. Another problem is <em>how</em> we are displaying them.</p>

<p><img src="/assets/posts/memory-p2/0.webp" alt="cards too big" /></p>

<p>Let’s address one thing at a time.</p>

<p>First, the dimension.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.flip-container</span><span class="o">,</span>
<span class="nc">.card__front</span><span class="o">,</span>
<span class="nc">.card__back</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">6.5em</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">6.5em</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p><img src="/assets/posts/memory-p2/1.webp" alt="card " /></p>

<p>Second, the way they are displayed. As you can see, now they are organized vertically. We can fix this by addressing the cards’ container</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.cards</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">-webkit-box</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">-ms-flexbox</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
    <span class="nl">-ms-flex-wrap</span><span class="p">:</span> <span class="n">wrap</span><span class="p">;</span>
    <span class="nl">flex-wrap</span><span class="p">:</span> <span class="n">wrap</span><span class="p">;</span>
    <span class="nl">-webkit-box-pack</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">-ms-flex-pack</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">justify-content</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
    <span class="nl">margin-top</span><span class="p">:</span> <span class="m">2em</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>With <code class="highlighter-rouge">display: flex</code> and <code class="highlighter-rouge">flex-wrap: wrap</code> we make sure the cards respond to changes affecting the screen width. In other words, we make sure they are responsive. Besides, we give some breathing space between the score panel and the cards grid.</p>

<p><img src="/assets/posts/memory-p2/2.webp" alt="cards grid" /></p>

<h2 id="reset">Reset</h2>
<p>I want to take a second and add a reset.</p>

<p>A <strong>reset</strong> is a CSS technique that allows us to nullify differences among browsers when they render a page. In fact, each browser has a different default style. This means, for example, that an header, say <code class="highlighter-rouge">&lt;h1&gt; My Title &lt;h1&gt;</code> will have different <code class="highlighter-rouge">font-size</code> and <code class="highlighter-rouge">font-weight</code> in different browsers.</p>

<p>Reset waterproofs our code from these differences.</p>

<p>If we use it, then we can make sure browsers will render our custom style in the same way.</p>

<p>Quite helpful.</p>

<p>And easy to implement.</p>

<p>There’s an online tool for this: the <a href="https://meyerweb.com/eric/tools/css/reset/">Meyerweb reset</a>. Check the link provided and paste that code at the beginning of your CSS. If you are too lazy for even that, here it is:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/</span>

<span class="nt">html</span><span class="o">,</span> <span class="nt">body</span><span class="o">,</span> <span class="nt">div</span><span class="o">,</span> <span class="nt">span</span><span class="o">,</span> <span class="nt">applet</span><span class="o">,</span> <span class="nt">object</span><span class="o">,</span> <span class="nt">iframe</span><span class="o">,</span>
<span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span><span class="o">,</span> <span class="nt">p</span><span class="o">,</span> <span class="nt">blockquote</span><span class="o">,</span> <span class="nt">pre</span><span class="o">,</span>
<span class="nt">a</span><span class="o">,</span> <span class="nt">abbr</span><span class="o">,</span> <span class="nt">acronym</span><span class="o">,</span> <span class="nt">address</span><span class="o">,</span> <span class="nt">big</span><span class="o">,</span> <span class="nt">cite</span><span class="o">,</span> <span class="nt">code</span><span class="o">,</span>
<span class="nt">del</span><span class="o">,</span> <span class="nt">dfn</span><span class="o">,</span> <span class="nt">em</span><span class="o">,</span> <span class="nt">img</span><span class="o">,</span> <span class="nt">ins</span><span class="o">,</span> <span class="nt">kbd</span><span class="o">,</span> <span class="nt">q</span><span class="o">,</span> <span class="nt">s</span><span class="o">,</span> <span class="nt">samp</span><span class="o">,</span>
<span class="nt">small</span><span class="o">,</span> <span class="nt">strike</span><span class="o">,</span> <span class="nt">strong</span><span class="o">,</span> <span class="nt">sub</span><span class="o">,</span> <span class="nt">sup</span><span class="o">,</span> <span class="nt">tt</span><span class="o">,</span> <span class="nt">var</span><span class="o">,</span>
<span class="nt">b</span><span class="o">,</span> <span class="nt">u</span><span class="o">,</span> <span class="nt">i</span><span class="o">,</span> <span class="nt">center</span><span class="o">,</span>
<span class="nt">dl</span><span class="o">,</span> <span class="nt">dt</span><span class="o">,</span> <span class="nt">dd</span><span class="o">,</span> <span class="nt">ol</span><span class="o">,</span> <span class="nt">ul</span><span class="o">,</span> <span class="nt">li</span><span class="o">,</span>
<span class="nt">fieldset</span><span class="o">,</span> <span class="nt">form</span><span class="o">,</span> <span class="nt">label</span><span class="o">,</span> <span class="nt">legend</span><span class="o">,</span>
<span class="nt">table</span><span class="o">,</span> <span class="nt">caption</span><span class="o">,</span> <span class="nt">tbody</span><span class="o">,</span> <span class="nt">tfoot</span><span class="o">,</span> <span class="nt">thead</span><span class="o">,</span> <span class="nt">tr</span><span class="o">,</span> <span class="nt">th</span><span class="o">,</span> <span class="nt">td</span><span class="o">,</span>
<span class="nt">article</span><span class="o">,</span> <span class="nt">aside</span><span class="o">,</span> <span class="nt">canvas</span><span class="o">,</span> <span class="nt">details</span><span class="o">,</span> <span class="nt">embed</span><span class="o">,</span> 
<span class="nt">figure</span><span class="o">,</span> <span class="nt">figcaption</span><span class="o">,</span> <span class="nt">footer</span><span class="o">,</span> <span class="nt">header</span><span class="o">,</span> <span class="nt">hgroup</span><span class="o">,</span> 
<span class="nt">menu</span><span class="o">,</span> <span class="nt">nav</span><span class="o">,</span> <span class="nt">output</span><span class="o">,</span> <span class="nt">ruby</span><span class="o">,</span> <span class="nt">section</span><span class="o">,</span> <span class="nt">summary</span><span class="o">,</span>
<span class="nt">time</span><span class="o">,</span> <span class="nt">mark</span><span class="o">,</span> <span class="nt">audio</span><span class="o">,</span> <span class="nt">video</span> <span class="p">{</span>
	<span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
	<span class="nl">padding</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
	<span class="nl">border</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
	<span class="nl">font-size</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
	<span class="nl">font</span><span class="p">:</span> <span class="nb">inherit</span><span class="p">;</span>
	<span class="nl">vertical-align</span><span class="p">:</span> <span class="nb">baseline</span><span class="p">;</span>
<span class="p">}</span>
<span class="c">/* HTML5 display-role reset for older browsers */</span>
<span class="nt">article</span><span class="o">,</span> <span class="nt">aside</span><span class="o">,</span> <span class="nt">details</span><span class="o">,</span> <span class="nt">figcaption</span><span class="o">,</span> <span class="nt">figure</span><span class="o">,</span> 
<span class="nt">footer</span><span class="o">,</span> <span class="nt">header</span><span class="o">,</span> <span class="nt">hgroup</span><span class="o">,</span> <span class="nt">menu</span><span class="o">,</span> <span class="nt">nav</span><span class="o">,</span> <span class="nt">section</span> <span class="p">{</span>
	<span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">body</span> <span class="p">{</span>
	<span class="nl">line-height</span><span class="p">:</span> <span class="m">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">ol</span><span class="o">,</span> <span class="nt">ul</span> <span class="p">{</span>
	<span class="nl">list-style</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">blockquote</span><span class="o">,</span> <span class="nt">q</span> <span class="p">{</span>
	<span class="nl">quotes</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">blockquote</span><span class="nd">:before</span><span class="o">,</span> <span class="nt">blockquote</span><span class="nd">:after</span><span class="o">,</span>
<span class="nt">q</span><span class="nd">:before</span><span class="o">,</span> <span class="nt">q</span><span class="nd">:after</span> <span class="p">{</span>
	<span class="nl">content</span><span class="p">:</span> <span class="s2">''</span><span class="p">;</span>
	<span class="nl">content</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">table</span> <span class="p">{</span>
	<span class="nl">border-collapse</span><span class="p">:</span> <span class="nb">collapse</span><span class="p">;</span>
	   <span class="nl">border-spacing</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now let’s check how our game page looks like.</p>

<p><img src="/assets/posts/memory-p2/3.webp" alt="cards grid" /></p>

<h2 id="make-all-cards-flippable">Make all cards flippable</h2>
<p>We began with one flipping card.</p>

<p>Then, we made a grid of 16 cards. You may have guessed it by now, we need to make all cards flippable.</p>

<p>Replace the code written during last part - handling only one card - with the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'container'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">cards</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s1">'card'</span><span class="p">),</span>
    <span class="nx">isFlipped</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">card</span> <span class="k">of</span> <span class="nx">cards</span><span class="p">){</span>
  <span class="nx">card</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isFlipped</span><span class="p">){</span>
          <span class="nx">flipCard</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
          <span class="nx">isFlipped</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">isFlipped</span><span class="p">){</span>
      <span class="nx">flipCardBack</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
          <span class="nx">isFlipped</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>

<p>First we grab the cards container by declaring <code class="highlighter-rouge">const container</code> and selecting tìhe <code class="highlighter-rouge">div</code>s <code class="highlighter-rouge">id</code>.</p>

<p>Then, with <code class="highlighter-rouge">var cards</code> we grab all the cards by selecting and getting all the elements with class <code class="highlighter-rouge">card</code>.</p>

<p>At this point, we loop through the cards. On each card, we place an event listener:</p>
<ul>
  <li><strong>if</strong> isFlipped value is equal to false, flip the card and set <code class="highlighter-rouge">isFlipped = true</code></li>
  <li><strong>if</strong> isFlipped value is equal to true, it means <code class="highlighter-rouge">flipCard(card)</code> was invoked. Hence, we can assume the  card was flipped -  the visual feedback tells us the truth anyway. We can nvoke<code class="highlighter-rouge">flipCardBack()</code> to set the card to its initial position.</li>
</ul>

<p>Now, we need to adjust the <code class="highlighter-rouge">handleTouch()</code> function in order to make sure mobile users can flip all the cards as well.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">handleTouch</span><span class="p">(</span><span class="nx">card</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isFlipped</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">flipCard</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
    <span class="nx">isFlipped</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isFlipped</span><span class="p">){</span>
    <span class="nx">flipCardBack</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
    <span class="nx">isFlipped</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Compared to the old version:</p>
<ul>
  <li>we replaced the <code class="highlighter-rouge">else</code> statement with an <code class="highlighter-rouge">if else</code> one, and put as condition <code class="highlighter-rouge">touchCount === 2</code></li>
  <li>when <code class="highlighter-rouge">touchCount === 2</code>, card gets flipped back and <code class="highlighter-rouge">touchCount</code> is set back to 0</li>
</ul>

<h2 id="shuffle-card">Shuffle card</h2>
<p>Cards are not cards if you can’t shuffle them.</p>

<p>In the real game, cards are shuffled everytime we start a new game. This keeps it challenging and ensures no one is cheating.</p>

<p>Just a few moments ago we selected all the cards and stored them in a variable.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">cards</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s1">'card'</span><span class="p">);</span>
</code></pre></div></div>
<p>To implement shuffling, we need these cards in an array.</p>

<p>This is tricky: <code class="highlighter-rouge">var cards</code> is not an array now. It is a <strong><a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList">NodeList</a></strong>: a collection of <code class="highlighter-rouge">DOM elements</code>.</p>

<p>This means we need to <strong>convert this NodeList to an array</strong>. We can do it with a function.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">nodeListToArray</span><span class="p">(</span><span class="nx">nodeList</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">card</span> <span class="k">of</span> <span class="nx">cards</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here’s what it does:</p>
<ol>
  <li>it takes a NodeList as an argument</li>
  <li>it creates a local, empty array named <code class="highlighter-rouge">arr</code></li>
  <li>it populates it with each card element</li>
  <li>it uses the <code class="highlighter-rouge">slice()</code> method on <code class="highlighter-rouge">arr</code> to create a copy of it and returns it.</li>
</ol>

<p>When we call <code class="highlighter-rouge">nodeListToArray(nodeList)</code> we are  sure we will get an array back.</p>

<p>We are now ready to handle the shuffling. But how can we do it?</p>

<p>Let’s create the <strong>shuffle function</strong></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">shuffleArray</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">random</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>

        <span class="kd">let</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">random</span><span class="p">];</span>

        <span class="nx">array</span><span class="p">[</span><span class="nx">random</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Here’s what it does:</p>
<ul>
  <li>it takes the converted array of cards as an argument</li>
  <li>it iterates through the cards</li>
  <li>for each card:
    <ul>
      <li>it calculates a random number ranging through the array’s indexes</li>
      <li>creates a <code class="highlighter-rouge">tmp</code> variable and points it to the card at the current index</li>
      <li>takes the card at the current index and points it to a <strong>random</strong> position in the array <strong>(given by the <code class="highlighter-rouge">random</code> variable)</strong></li>
      <li>takes the element at said random position and points it to <code class="highlighter-rouge">tmp</code></li>
    </ul>
  </li>
</ul>

<p>By doing this, at each iteration two cards swap their position, one of which is selected randomly. This ensure the reality of the shuffle.</p>

<p>To recap, there’s a function convert the <code class="highlighter-rouge">cards</code> <code class="highlighter-rouge">NodeList</code> to an actual array. There’s also a function that shuffles this array of cards.</p>

<p>The last to implement shuffling is to decide **how to handle the position change of cards in the DOM.</p>

<p>Well, to be precise, their position change in the <code class="highlighter-rouge">cards</code> div.</p>

<p>So how do we go to actually do that?</p>

<p>Here’s how: we remove each div with class <code class="highlighter-rouge">card</code> from the parent container div. <em>Then</em> the actual shuffling takes place. <em>Finally</em>, we append cards to the container div in their new poisitions.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">shuffleCards</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// convert Node list to array</span>
    <span class="kd">let</span> <span class="nx">arrayOfCards</span> <span class="o">=</span> <span class="nx">nodeListToArray</span><span class="p">(</span><span class="nx">cards</span><span class="p">);</span>

    <span class="c1">// remove cards from dom</span>
    <span class="nx">arrayOfCards</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">card</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">container</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
    <span class="p">})</span>

    <span class="c1">// shuffle them</span>
    <span class="nx">shuffleArray</span><span class="p">(</span><span class="nx">arrayOfCards</span><span class="p">);</span>

    <span class="c1">// put them back in the dom</span>
    <span class="nx">arrayOfCards</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">card</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">card</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here’s a little demonstration.</p>

<p><img src="/assets/posts/memory-p2/shuffleCards().gif" alt="shuffle-gif" /></p>

<p>Notice that at each time I click the ‘Shuffle’ button, the <code class="highlighter-rouge">shuffleCards()</code> function is invoked and executed.</p>

<h2 id="end-of-part-2">End of part 2</h2>

<p>This is it for the time being!</p>

<p>Here’s the CodePen of what we just did.</p>

<p data-height="265" data-theme-id="dark" data-slug-hash="xWmBNo" data-default-tab="html,result" data-user="davide2894" data-embed-version="2" data-pen-title="Memory Game - p2" class="codepen">See the Pen <a href="https://codepen.io/davide2894/pen/xWmBNo/">Memory Game - p2</a> by Davide (<a href="https://codepen.io/davide2894">@davide2894</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async="" src="https://static.codepen.io/assets/embed/ei.js"></script>

<hr />

<p>Thank you for reading this post, from the bottom of my heart. You can’t even imagine how this makes me happy!</p>

<p>Please, if you have questions or want to say hi, reach out here or on <a href="https://twitter.com/davideiaiunese">Twitter</a>.</p>

<p>If you find this useful, please subscribe to my blog. You will be up to date to every new post I write. I won’t waste your time.</p>

<p><em>This post was originally published on <a href="https://codeburst.io/how-to-make-a-dragon-ball-memory-game-part-2-5659ff2ee0b9">Codeburst.io</a></em></p>

  
  
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://loafcode.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

<div class="pagination">
  
  
    <a href="/2018-04-09/how-to-make-a-dragon-ball-based-memory-game-part-1" class="right arrow">&#8594;</a>
  

  <a href="#" class="top">Top</a>
</div>

        </main>

        <footer>
            <ul class="footer-list">
                <a href="https://github.com/davide2894" target="_blank">
                    <li class="footer-item github">Github</li>
                </a>
                <a href="https://www.linkedin.com/in/davideiaiunese/" target="_blank">
                    <li class="footer-item linkedin">Linkedin</li>
                </a>
                <a href="mailto:davide.iaiunese@gmail.com" target="_blank">
                    <li class="footer-item email">Email</li>
                </a>
                <a href="https://twitter.com/davideiaiunese" target="_blank">
                    <li class="footer-item twitter">Twitter</li>
                </a>
            </ul>

            <div class="newsletter-container">
                <h4 class="newsletter-title">Subscribe</h4>
                <!-- <p class="newsletter-text"></p> -->
                <form class="newsletter-form" action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=MorningDev', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">

                    <p class="newsletter-text">Get new posts to your inbox</p>

                    <input type="hidden" value="MorningDev" name="uri" />

                    <input type="hidden" name="loc" value="en_US" />
                    
                    <input class="newsletter-email" type="text" name="email" placeholder="name@example.com" />

                    <input class="newsletter-submit" type="submit" value="Subscribe" />

                </form>
            </div>

            <div class="footer-item copyright">
                &copy; <time datetime="2018-04-16 18:06:02 +0200">2018</time>
                <span class="copyright-name">Davide Iaiunese</span>
            </div>
        </footer>

    </div>

</body>

</html>
